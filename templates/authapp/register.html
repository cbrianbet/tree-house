{% load static %}
<!DOCTYPE html>
<html class="no-js css-menubar" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="bootstrap admin template">
    <meta name="author" content="">

    <title>Register | MNEST Africa</title>

    <link rel="apple-touch-icon" href="{% static 'authapp/assets/images/mnest-png.png' %}">
    <link rel="shortcut icon" href="{% static 'authapp/assets/images/mnest-png.png' %}">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{% static 'authapp/global/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/css/bootstrap-extend.min.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/assets/css/site.min.css' %}">

    <!-- Plugins -->
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/animsition/animsition.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/asscrollable/asScrollable.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/switchery/switchery.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/intro-js/introjs.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/slidepanel/slidePanel.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/flag-icon-css/flag-icon.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/assets/examples/css/pages/register-v2.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/jquery-wizard/jquery-wizard.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/formvalidation/formValidation.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/blueimp-file-upload/jquery.fileupload.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/vendor/dropify/dropify.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/assets/examples/css/uikit/modals.css' %}">

    <link rel="stylesheet" href="{% static 'authapp/global/vendor/bootstrap-sweetalert/sweetalert.css' %}">

    <!-- Fonts -->
    <link rel="stylesheet" href="{% static 'authapp/global/fonts/web-icons/web-icons.min.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/global/fonts/brand-icons/brand-icons.min.css' %}">
    <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:300,400,500,300italic'>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <!--[if lt IE 9]>
    <script src="{% static 'authapp/global/vendor/html5shiv/html5shiv.min.js' %}"></script>
    <![endif]-->

    <!--[if lt IE 10]>
    <script src="{% static 'authapp/global/vendor/media-match/media.match.min.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/respond/respond.min.js' %}"></script>
    <![endif]-->

    <!-- Scripts -->
    <script src="{% static 'authapp/global/vendor/breakpoints/breakpoints.js' %}"></script>
    <script>
        Breakpoints();
    </script>

</head>
<body class="animsition page-register-v2 layout-full page-dark">
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->


<!-- Page -->
<div class="page" data-animsition-in="fade-in" data-animsition-out="fade-out">
    <div class="page-content">
        <div class="page-brand-info">
            <div class="brand">
                <img class="brand-img" src="{% static 'authapp/assets/images/mnest-png.png' %}" alt="...">
                <h2 class="brand-text font-size-40 text-dark">MNEST Africa</h2>
            </div>
            <p class="font-size-20 text-dark">Sign up to start your awesome journey.</p>
        </div>

        <div class="page-register-main animation-slide-left animation-duration-1">
            <h3 class="font-size-24">Sign Up</h3>
            <p></p>
            <!-- Panel Wizard Form Container -->
            <div class="panel" id="exampleWizardFormContainer">
                <div class="panel-heading">
                    <h3 class="panel-title"></h3>
                </div>
                <div class="panel-body">
                    <!-- Steps -->
                    <div class="pearls row">
                        <div class="pearl current col-3">
                            <div class="pearl-icon"><i class="icon wb-user" aria-hidden="true"></i></div>
                            <span class="pearl-title">Account Info</span>
                        </div>
                        <div class="pearl col-3">
                            <div class="pearl-icon"><i class="icon wb-payment" aria-hidden="true"></i></div>
                            <span class="pearl-title">Company Info</span>
                        </div>
                        <div class="pearl col-3">
                            <div class="pearl-icon"><i class="icon wb-cloud" aria-hidden="true"></i></div>
                            <span class="pearl-title">Subscription Plan</span>
                        </div>
                        <div class="pearl col-3">
                            <div class="pearl-icon"><i class="icon wb-check" aria-hidden="true"></i></div>
                            <span class="pearl-title">Confirmation</span>
                        </div>
                    </div>
                    <!-- End Steps -->

                    <!-- Wizard Content -->
                    <form id="exampleFormContainer" action="{% url 'register' %}" method="post" autocomplete="off"
                          enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="wizard-content">
                            <div class="wizard-pane active" id="exampleAccountOne" role="tabpanel">
                                <div class="form-group">
                                    <label class="form-control-label" for="f_name">First name</label>
                                    <input type="text" class="form-control" id="f_name" name="f_name"
                                           required="required">
                                </div>
                                <div class="form-group">
                                    <label class="form-control-label" for="l_name">Middle & Last Name*</label>
                                    <input type="text" class="form-control" id="l_name" name="l_name"
                                           required="required">

                                </div>
                                <div class="form-group">
                                    <label class="form-control-label" for="u_name">Username*</label>
                                    <input type="text" class="form-control" id="u_name" name="username"
                                           required="required" onBlur="check()">
                                </div>
                                <div id="uname_response"></div>
                                <div class="form-group">
                                    <label class="form-control-label" for="inputEmail">Email*</label>
                                    <input type="email" class="form-control" id="inputEmail" name="email"
                                           required="required">
                                </div>
                                <div class="form-group">
                                    <label class="form-control-label" for="inputPassword">Password*</label>
                                    <input type="password" class="form-control" id="inputPassword" name="password"
                                           required="required">
                                </div>
                                <div class="form-group">
                                    <label class="form-control-label" for="acc_type">Account Type*</label>
                                    <select data-plugin="selectpicker" title="Account Type" id="acc_type"
                                            name="acc_type" required="required">
                                        <option value="2">Landlord</option>
                                        <option value="3">Agent</option>
                                    </select>
                                </div>
                            </div>
                            <div class="wizard-pane" id="exampleBillingOne" role="tabpanel">
                                <div id="agent">
                                    <div class="form-group">
                                        <label class="form-control-label" for="company">Company Name*</label>
                                        <input type="text" class="form-control" id="company" name="company"
                                               required="required">
                                    </div>
                                    <label class="form-control-label" for="logo">Logo</label>
                                    <input type="file" id="logo" name="logo" data-plugin="dropify"
                                           data-default-file="" accept="image/*"/>
                                    <div class="form-group">
                                        <label class="form-control-label" for="location">Office
                                            location(optional)</label>
                                        <input type="text" class="form-control" id="location" name="location"
                                               required="required">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label" for="props_no">Number of employees</label>
                                        <input type="number" class="form-control" id="props_no" min="1" name="props_no"
                                               required="required">
                                    </div>
                                </div>
                                <div id="landlord">
                                    <div class="form-group">
                                        <label class="form-control-label" for="mobile">Mobile Number*</label>
                                        <input type="tel" class="form-control" id="mobile" name="mobile"
                                               required="required">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label" for="id_no">ID Number*</label>
                                        <input type="text" class="form-control" id="id_no" name="id_no"
                                               required="required">
                                    </div>
                                </div>
                                {#                                <input type="file" id="input-file-now-custom-1" data-plugin="dropify"#}
                                {#                                       data-default-file="../../../global/photos/placeholder.png"#}
                                {#                                />#}
                            </div>
                            <div class="wizard-pane" id="exampleGettingOne" role="tabpanel">
                                <div class="text-center my-20">
                                    <div class="form-group clearfix">
                                        {% for foo in sub %}
                                            <div class="card card-inverse bg-primary">
                                                <div class="card-header">{{ foo.name }}</div>
                                                <div class="card-body">
                                                    <h4 class="text-uppercase">{{ foo.name }}</h4>
                                                    <span>{{ foo.description }}</span>
                                                    <h5 class="card-title">Price: KSHS.{{ foo.value }}</h5>
                                                    <h5 class="card-title">Period: {{ foo.duration }} months</h5>
                                                    <div class="radio-custom radio-primary">
                                                        <input type="radio" name="sub_picked" required
                                                               value="{{ foo.uuid }}">
                                                        <label>Select</label>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}

                                    </div>
                                </div>
                            </div>
                            <div class="wizard-pane" id="exampleGettingOne1" role="tabpanel">
                                <div class="text-center my-20">
                                    <div class="form-group clearfix">
                                        <div class="checkbox-custom checkbox-inline checkbox-primary float-left">
                                            <input type="checkbox" id="inputCheckbox" name="term" required>
                                            <label for="inputCheckbox"></label>
                                        </div>
                                        <p class="ml-40">By clicking Sign Up, you agree to our
                                            <a class="btn btn-outline"
                                               data-target="#examplePositionCenter" data-toggle="modal">Terms
                                            </a> and <a class="btn btn-outline"
                                               data-target="#examplePositionCenter2" data-toggle="modal">Privacy Policy
                                            </a>
                                            .
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- Wizard Content -->
                </div>
            </div>
            <!-- End Panel Wizard Form Container -->
            <p>Have account already? Please go to <a href="{% url 'web-login' %}">Sign In</a></p>
            <footer class="page-copyright">
                <p>WEBSITE BY MNEST Africa</p>
                <p>© 2021. All RIGHT RESERVED.</p>
            </footer>
        </div>

            <!-- Modal -->
            <div class="modal fade example-modal-lg" id="examplePositionCenter" aria-hidden="true"
                 aria-labelledby="examplePositionCenter"
                 role="dialog" tabindex="-1">
                <div class="modal-dialog modal-simple modal-center">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Terms of Use</h4>
                        </div>
                        <div class="modal-body">
                            <p class="text-dark">{{terms }}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Modal -->

            <!-- Modal -->
            <div class="modal fade example-modal-lg" id="examplePositionCenter2" aria-hidden="true"
                 aria-labelledby="examplePositionCenter"
                 role="dialog" tabindex="-1">
                <div class="modal-dialog modal-simple modal-center">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                            <h4 class="modal-title">Privacy Policy</h4>
                        </div>
                        <div class="modal-body">
                            <p class="text-dark">{{ privacy }}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Modal -->

    </div>
</div>
<!-- End Page -->


<!-- Core  -->
<script src="{% static 'authapp/global/vendor/babel-external-helpers/babel-external-helpers.js' %}"></script>
<script src="{% static 'authapp/global/vendor/jquery/jquery.js' %}"></script>
<script src="{% static 'authapp/global/vendor/popper-js/umd/popper.min.js' %}"></script>
<script src="{% static 'authapp/global/vendor/bootstrap/bootstrap.js' %}"></script>
<script src="{% static 'authapp/global/vendor/animsition/animsition.js' %}"></script>
<script src="{% static 'authapp/global/vendor/mousewheel/jquery.mousewheel.js' %}"></script>
<script src="{% static 'authapp/global/vendor/asscrollbar/jquery-asScrollbar.js' %}"></script>
<script src="{% static 'authapp/global/vendor/asscrollable/jquery-asScrollable.js' %}"></script>
<script src="{% static 'authapp/global/vendor/ashoverscroll/jquery-asHoverScroll.js' %}"></script>

<!-- Plugins -->
<script src="{% static 'authapp/global/vendor/switchery/switchery.js' %}"></script>
<script src="{% static 'authapp/global/vendor/intro-js/intro.js' %}"></script>
<script src="{% static 'authapp/global/vendor/screenfull/screenfull.js' %}"></script>
<script src="{% static 'authapp/global/vendor/slidepanel/jquery-slidePanel.js' %}"></script>
<script src="{% static 'authapp/global/vendor/jquery-placeholder/jquery.placeholder.js' %}"></script>
<script src="{% static 'authapp/global/vendor/formvalidation/formValidation.js' %}"></script>
<script src="{% static 'authapp/global/vendor/formvalidation/framework/bootstrap.js' %}"></script>
<script src="{% static 'authapp/global/vendor/jquery-wizard/jquery-wizard.js' %}"></script>
<script src="{% static 'authapp/global/vendor/dropify/dropify.min.js' %}"></script>

<!-- Scripts -->
<script src="{% static 'authapp/global/js/Component.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin.js' %}"></script>
<script src="{% static 'authapp/global/js/Base.js' %}"></script>
<script src="{% static 'authapp/global/js/Config.js' %}"></script>

<script src="{% static 'authapp/assets/js/Section/Menubar.js' %}"></script>
<script src="{% static 'authapp/assets/js/Section/GridMenu.js' %}"></script>
<script src="{% static 'authapp/assets/js/Section/Sidebar.js' %}"></script>
<script src="{% static 'authapp/assets/js/Section/PageAside.js' %}"></script>
<script src="{% static 'authapp/assets/js/Plugin/menu.js' %}"></script>

<script src="{% static 'authapp/global/js/config/colors.js' %}"></script>
<script src="{% static 'authapp/assets/js/config/tour.js' %}"></script>
<script>Config.set('assets', '../../authapp/static/authapp/assets');</script>

<!-- Page -->
<script src="{% static 'authapp/assets/js/Site.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/asscrollable.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/slidepanel.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/switchery.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/jquery-placeholder.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/material.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/dropify.js' %}"></script>
<script src="{% static 'authapp/assets/examples/js/forms/uploads.js' %}"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<script src="{% static 'authapp/global/vendor/bootstrap-sweetalert/sweetalert.js' %}"></script>
<script src="{% static 'authapp/global/js/Plugin/bootstrap-sweetalert.js' %}"></script>

<script src="{% static 'authapp/global/js/Plugin/jquery-wizard.js' %}"></script>
{#<script src="{% static 'authapp/assets/examples/js/forms/signupwizard.js' %}"></script>#}
<script>
    (function (global, factory) {
        if (typeof define === "function" && define.amd) {
            define('/forms/wizard', ['jquery', 'Site'], factory);
        } else if (typeof exports !== "undefined") {
            factory(require('jquery'), require('Site'));
        } else {
            var mod = {
                exports: {}
            };
            factory(global.jQuery, global.Site);
            global.formsWizard = mod.exports;
        }
    })(this, function (_jquery, _Site) {
        'use strict';

        var _jquery2 = babelHelpers.interopRequireDefault(_jquery);

        (0, _jquery2.default)(document).ready(function ($$$1) {
            (0, _Site.run)();
        });


        // Example Wizard Form Container
        // -----------------------------
        // http://formvalidation.io/api/#is-valid-container
        (function () {
            var defaults = Plugin.getDefaults("wizard");

            var options = _jquery2.default.extend(true, {}, defaults, {
                onInit: function onInit() {
                    (0, _jquery2.default)('#exampleFormContainer').formValidation({
                        framework: 'bootstrap',
                        fields: {
                            username: {
                                validators: {
                                    notEmpty: {
                                        message: 'The username is required'
                                    }
                                }
                            },
                            password: {
                                validators: {
                                    notEmpty: {
                                        message: 'The password is required'
                                    }
                                }
                            },
                        },
                        err: {
                            clazz: 'invalid-feedback'
                        },
                        control: {
                            // The CSS class for valid control
                            valid: 'is-valid',

                            // The CSS class for invalid control
                            invalid: 'is-invalid'
                        },
                        row: {
                            invalid: 'has-danger'
                        }
                    });
                },
                validator: function validator() {
                    var fv = (0, _jquery2.default)('#exampleFormContainer').data('formValidation');

                    var $this = (0, _jquery2.default)(this);

                    // Validate the container
                    fv.validateContainer($this);

                    var isValidStep = fv.isValidContainer($this);
                    if (isValidStep === false || isValidStep === null) {
                        return false;
                    }
                    if ($('#uname_response').html() == '' || $('#uname_response').html() == '<span id="resp" style="color: green;">Available.</span>') {
                        console.log('true')
                        return true;
                    } else {
                        console.log($('#uname_response'))

                        var username = $("#u_name").val().trim();
                        $.ajax({

                            url: "{% url 'check-username' %}",
                            type: 'post',
                            data: {username: username},
                            success: function (data) {
                                console.log(data)
                                if (data === '<span id=\'resp\' style=\'color: red;\'>Username Not Available.</span>') {
                                    swal({
                                        title: 'Error!!',
                                        text: 'Username not available',
                                        type: 'error'
                                    });
                                    return false;
                                } else {
                                    return true;
                                }
                            },
                            error: function (er) {
                                console.log("Login error");
                                swal('Something went wrong', 'Try again!!', 'error');
                            }
                        });
                        return false;
                    }

                },
                onFinish: function onFinish() {
                    console.log($('#exampleFormContainer')[0])
                    $('#exampleFormContainer')[0].submit();
                },
                buttonsAppendTo: '.panel-body'
            });

            (0, _jquery2.default)("#exampleWizardFormContainer").wizard(options);
        })();

    });
</script>

<script>
    $(document).ready(function () {

        $("#u_name").keyup(function () {

            var username = $(this).val().trim();

            if (username != '') {
                console.log(username)

                $.ajax({
                    url: "{% url 'check-username' %}",
                    type: 'post',
                    data: {username: username},
                    success: function (response) {
                        $('#uname_response').html(response);

                    }
                });
            } else {
                $("#uname_response").html("");
            }
            console.log($('#uname_response').html())

        });
        console.log($('#resp'))

    });

    function check() {
        if ($('#uname_response') == '' || $('#uname_response') == '<span id="resp" style="color: green;">Available.</span>') {
            var field = $('#u_name');
            console.log(field)
            setTimeout(function () {
                field.focus();
            }, 0);
        }
    }

</script>

<script>
    $(function () {
        $('select').selectpicker();
        $('select').change(function () {
            var value = $(this).val();
            console.log(value)
            if (value == "2") {
                $('#agent').hide();
                $('#landlord').show();

            } else if (value == "3") {
                $('#agent').show();
                $('#landlord').hide();
            }

        });
    });
    (function (document, window, $) {
        'use strict';

        var Site = window.Site;
        $(document).ready(function () {
            Site.run();
        });
    })(document, window, jQuery)
</script>
</body>
</html>
