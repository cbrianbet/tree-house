{% extends 'authapp/base.html' %}
{% load static %}

{% block title %}

    <title>MNEST | Add Tenant Invoice</title>
{% endblock %}

{% block headscripts %}

    <link rel="stylesheet" href="{% static 'authapp/global/vendor/datatables.net-bs4/dataTables.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-fixedheader-bs4/dataTables.fixedheader.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-fixedcolumns-bs4/dataTables.fixedcolumns.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-rowgroup-bs4/dataTables.rowgroup.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-scroller-bs4/dataTables.scroller.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-select-bs4/dataTables.select.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-responsive-bs4/dataTables.responsive.bootstrap4.css' %}">
    <link rel="stylesheet"
          href="{% static 'authapp/global/vendor/datatables.net-buttons-bs4/dataTables.buttons.bootstrap4.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/assets/examples/css/tables/datatable.css' %}">
    <link rel="stylesheet" href="{% static 'authapp/assets/examples/css/forms/layouts.css' %}">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <style>
        .page-invoice-amount {
            padding-top: 10px;
            margin-bottom: 40px;
            font-size: 20px;
            border-top: 1px solid #e4eaec;
        }

    </style>
{% endblock %}

{% block page %}

    <!-- Page -->
    <div class="page">
        <div class="page-header">
            <h1 class="page-title">Invoice {{ invoice.invoice_no }}</h1>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Bills</a></li>
                <li class="breadcrumb-item active">Invoice Info</li>
            </ol>
        </div>

        <div class="page-content">
            <!-- Panel Table Add Row -->
            <div class="panel">
                <header class="panel-heading">
                    <h3 class="panel-title"></h3>
                </header>
                <div class="panel-body">
                    <div class="row">
                    </div>
                    <form action="{% url 'more-info' i_id=invoice.uuid %}" method="post">
                        {% csrf_token %}
                        <table class="table table-bordered table-hover table-striped" cellspacing="0"
                               id="invoiceItems">
                            <thead>
                            <tr>
                                <th>Invoice Item</th>
                                <th>Amount Payable</th>
                                <th>Remarks</th>
                                <th>Payment Amount</th>
                                <th>Payment Mode</th>
                                <th>Payment Transaction code</th>
                                <th>Payment Remarks</th>
                                <th>Payment Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for foo in bills %}
                                <tr>
                                    <td>{{ foo.invoice_item }}</td>
                                    <td id="loop">{{ foo.amount }}</td>
                                    <td>{{ foo.description }}</td>
                                    <td>
                                        <div class="form-group"><input class="form-control" type="number" min="0"></div>
                                    </td>
                                    <td>

                                        <div class="form-group">
                                            <select data-plugin="selectpicker" id="acc_type" name="payment_mode" required="required">
                                                <option value="Cash">Cash</option>
                                                <option value="Mpesa">Mpesa</option>
                                                <option value="Bank Transfer">Bank Transfer</option>
                                                <option value="Cheque">Cheque</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-group"><input class="form-control" type="text"></div>
                                    </td>
                                    <td>
                                        <div class="form-group"><input class="form-control" type="text"></div>
                                    </td>
                                    <td>
                                        <div class="form-group"><input class="form-control" type="date"></div>
                                    </td>
                                </tr>

                            {% endfor %}


                            </tbody>
                        </table>
                        <div class="form-group text-left clearfix">
                            <div class="checkbox-custom checkbox-inline checkbox-primary float-left">
                                <input type="checkbox" id="inputCheckbox" name="term">
                                <label for="inputCheckbox"></label>
                            </div>
                            <p class="ml-40 text-dark">Close Invoice</p></a>.
                            </p>
                        </div>

                        <div class="text-right clearfix">
                            <div class="float-right">
                                <p class="page-invoice-amount">Grand Total:
                                    <span id="total">Kshs. </span>
                                </p>
                            </div>
                        </div>
                        <button class="btn btn-outline btn-danger" type="submit">
                            <i class="icon wb-thumb-up" aria-hidden="true"></i> Submit
                        </button>
                    </form>

                </div>
            </div>
            <!-- End Panel Table Add Row -->
        </div>
    </div>
    <!-- End Page -->

{% endblock %}


{% block footscripts %}
    <script src="{% static 'authapp/global/vendor/datatables.net/jquery.dataTables.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-bs4/dataTables.bootstrap4.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-fixedcolumns/dataTables.fixedColumns.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-fixedheader/dataTables.fixedHeader.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-scroller/dataTables.scroller.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-rowgroup/dataTables.rowGroup.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-responsive/dataTables.responsive.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-responsive-bs4/responsive.bootstrap4.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-buttons/dataTables.buttons.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-buttons/buttons.html5.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-buttons/buttons.flash.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-buttons/buttons.print.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-buttons/buttons.colVis.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/datatables.net-buttons-bs4/buttons.bootstrap4.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/asrange/jquery-asRange.min.js' %}"></script>
    <script src="{% static 'authapp/global/vendor/bootbox/bootbox.js' %}"></script>

    <script src="{% static 'authapp/global/js/Plugin/datatables.js' %}"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script>
        $(document).ready(function () {
            calculateColumn();
        });

        function calculateColumn() {
            var TotalValue = 0;

            $("#loop").each(function (index, value) {
                console.log(value.innerText)
                currentRow = parseFloat(value.innerText);
                TotalValue += currentRow
            });

            $('#total').text('Kshs. ' + TotalValue);
        }


    </script>



    <script>
        (function (document, window, $) {
            'use strict';

            var Site = window.Site;
            $(document).ready(function () {
                Site.run();
            });
        })(document, window, jQuery);
    </script>
{% endblock %}
